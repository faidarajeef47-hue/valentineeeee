<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Ben babyyy ğŸ’–</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Poppins, sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  text-align:center;
}

.card{
  background:white;
  padding:22px;
  border-radius:20px;
  width:92%;
  max-width:420px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}

button{
  padding:14px 26px;
  border:none;
  border-radius:25px;
  font-size:17px;
  cursor:pointer;
}

#yes{background:#ff4d6d;color:white;}
#no{background:#ddd;position:absolute;}
.hidden{display:none;}

.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
  margin:20px auto;
  max-width:260px;
}

.cell{
  width:80px;
  height:80px;
  font-size:36px;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#ffe6eb;
  border-radius:15px;
}

.hearts{
  font-size:22px;
  margin-bottom:10px;
}

#msg{
  min-height:24px;
  font-weight:500;
}

.letter{
  font-family:'Dancing Script', cursive;
  font-size:22px;
  line-height:1.7;
  text-align:left;
  white-space:pre-line;
  max-height:420px;
  overflow-y:auto;
  padding:10px;
}
</style>
</head>

<body>

<!-- PROPOSAL -->
<div class="card" id="proposal">
  <h1>Ben, will you be my Valentine? ğŸ’Œ</h1>
  <button id="yes">Yes ğŸ’–</button>
  <button id="no">No ğŸ™„</button>
</div>

<!-- YAY -->
<div class="card hidden" id="yay">
  <h1>yayyyyyyyyy :) ğŸ’˜ğŸ’˜ğŸ’˜</h1>
  <p>Youâ€™re officially my Valentine ğŸ˜Œâ¤ï¸</p>
  <p>I love you soo sooo soooo much ğŸ’</p>
  <button onclick="startGame()">open your letter ğŸ’Œ</button>
</div>

<!-- GAME -->
<div class="card hidden" id="game">
  <h2>Win Tic-Tac-Toe to read the letter ğŸ˜</h2>
  <div class="hearts" id="lives"></div>
  <div class="board" id="board"></div>
  <p id="msg"></p>
</div>

<!-- LETTER -->
<div class="card hidden" id="letter">
  <h2>For you, Ben ğŸ’–</h2>
  <div class="letter">
Happy Valentineâ€™s Day, babyyyy  
I love you soo so soooooo much.

I still canâ€™t believe Iâ€™m celebrating my first Valentine with my first love. Iâ€™m glad I found the courage to talk to you, because before you, I never thought I would feel a love like this. You are everything I dream about.

Sometimes I get jealous of people who get to see you every day, because I wish I was there instead. Loving you from a distance isnâ€™t always easy, but loving you is still my favorite thing. Iâ€™ve never been this comfortable with anyone but you, Ben.

I miss you so much it aches. Your touch, your lips, your hands, your breathing, your smile, your laughter, those deep brown eyes, your autistic humour, your scent. Everything about you.

Ben, I know weâ€™ve had problems before, but the way we fix things together makes me believe in us. No matter how much I suffered before, if the result is you, Iâ€™d choose this love again and again.

You are the sun in my life, even when things feel dark.

I will always be there for you.  
I love you soo so soooo much, my love.  
Thank you for being mine ğŸ’
  </div>
</div>

<script>
const proposal = document.getElementById("proposal");
const yay = document.getElementById("yay");
const game = document.getElementById("game");
const letter = document.getElementById("letter");

const no = document.getElementById("no");
const yes = document.getElementById("yes");
const boardDiv = document.getElementById("board");
const msg = document.getElementById("msg");
const livesDiv = document.getElementById("lives");

no.addEventListener("mouseover", moveNo);
no.addEventListener("touchstart", moveNo);

function moveNo(){
  no.style.left = Math.random()*260 + "px";
  no.style.top  = Math.random()*260 + "px";
}

yes.onclick = () => {
  proposal.classList.add("hidden");
  yay.classList.remove("hidden");
};

let board, lives, waiting, roundActive;

const wins = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function startGame(){
  yay.classList.add("hidden");
  game.classList.remove("hidden");
  lives = 3;
  startRound();
}

function startRound(){
  board = Array(9).fill("");
  boardDiv.innerHTML = "";
  waiting = false;
  roundActive = true;
  updateLives();
  msg.textContent = "Your move, baby ğŸ˜Œ";

  board.forEach((_,i)=>{
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.onclick = () => playerMove(i, cell);
    boardDiv.appendChild(cell);
  });
}

function updateLives(){
  livesDiv.textContent = "â¤ï¸".repeat(lives);
}

function playerMove(i, cell){
  if(!roundActive || waiting || board[i]) return;
  board[i] = "X";
  cell.textContent = "âŒ";

  if(checkWin("X")){
    roundActive = false;
    msg.textContent = "You won baby!!!! ğŸ¥ºğŸ’˜";
    return setTimeout(openLetter, 1200);
  }

  if(isTie()){
    roundActive = false;
    return handleLoss("Tie ğŸ˜® try again baby");
  }

  waiting = true;
  msg.textContent = "Your baby is thinkingâ€¦ ğŸ¤”ğŸ’—";
  setTimeout(botMove, 900);
}

function botMove(){
  let i = randomMove();
  board[i] = "O";
  boardDiv.children[i].textContent = "â­•";
  waiting = false;

  if(checkWin("O")) return handleLoss("Donâ€™t give up baby ğŸ¥º next round");
  if(isTie()) return handleLoss("Tie ğŸ˜® try again baby");

  msg.textContent = "Your turn love ğŸ˜Œ";
}

function handleLoss(text){
  lives--;
  updateLives();
  msg.textContent = text;
  setTimeout(startRound, 1000);
}

function openLetter(){
  proposal.classList.add("hidden");
  yay.classList.add("hidden");
  game.classList.add("hidden");
  letter.classList.remove("hidden");
}

function randomMove(){
  let empty = board.map((v,i)=>v==""?i:null).filter(v=>v!==null);
  return empty[Math.floor(Math.random()*empty.length)];
}

function checkWin(p){
  return wins.some(w=>w.every(i=>board[i]===p));
}

function isTie(){
  return board.every(c=>c!=="");
}
</script>

</body>
</html>
